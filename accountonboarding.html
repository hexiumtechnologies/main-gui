<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/img/hexium.png">
  <meta name="description" content="Hexium is a powerful, easy-to-use software suite that lets anyone build projects effortlessly, from simple ideas to advanced creations.">
  <meta name="keywords" content="Hexium, Technology, Homelab, Software, Creative, Uniy, Scratch, Adobe, TurboWarp, PenguinMod, IDE, vscode, dev, Web, HTML, CSS, JavaScript">
  <title>Create an account - Hexium</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/styles/home.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Round" rel="stylesheet" />
  <style>
    input:focus {
      outline: none !important;
      box-shadow: none !important;
    }
    
    .step {
      display: none;
    }
    
    .step.current {
      display: flex;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <header class="toolbar">
    <a href="/" aria-label="Hexium Home">
      <img src="https://i.ibb.co/3yfNr0Bh/hexium-1.png" alt="Hexium Logo" />
    </a>
    <nav class="nav-links" role="navigation" aria-label="Primary Navigation">
      <a href="https://forums.hexiumapps.com/">Forums</a>
      <a href="/pricing">Pricing</a>
      <a href="/about">About</a>
      <a href="/account">Account</a>
    </nav>
  </header>

  <main class="flex-grow flex items-center justify-center">
    <!-- Step 1: Username -->
    <div id="step1" class="step current">
      <section class="hero py-16 sm:py-20 text-center">
        <div class="container mx-auto px-4 max-w-screen-sm">
          <div class="sm:[width:480px] md:[width:540px] lg:[width:600px]" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <img src="/img/username.svg" style="margin: 10px;">
            <h2 class="text-2xl sm:text-3xl font-bold leading-snug flex gap-2 justify-center" style="font-weight:800;">
              Welcome to the Hexium community!
            </h2>
            <p style="font-size: 16px;">Ready to join? Type a username below and see if it is available to use.</p>
            <input 
              type="text" 
              id="username" 
              name="username" 
              minlength="3"
              maxlength="20"
              placeholder="Create a username"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; padding: 14px 19px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #262626; color: white; font-size: 16px; outline: none;"
            >
            <button 
              id="continue1"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #34C286; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;"
            >
              Continue
            </button>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Step 2: Password -->
    <div id="step2" class="step">
      <section class="hero py-16 sm:py-20 text-center">
        <div class="container mx-auto px-4 max-w-screen-sm">
          <div class="sm:[width:480px] md:[width:540px] lg:[width:600px]" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <img src="/img/password.svg" style="margin: 10px;">
            <h2 class="text-2xl sm:text-3xl font-bold leading-snug flex gap-2 justify-center" style="font-weight:800;">
              Secure your account.
            </h2>
            <p style="font-size: 20px;">Create a password that's secure, yet easy to remember.</p>
            <input 
              type="password" 
              id="password" 
              name="password" 
              minlength="8"
              placeholder="Create a password"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; padding: 14px 19px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #262626; color: white; font-size: 16px; outline: none;"          >
            <button 
              id="continue2"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #34C286; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;"          >
              Continue
            </button>
          </div>
        </div>
      </section>
    </div>
    
    <!-- Step 3: Birthdate -->
    <div id="step3" class="step">
      <section class="hero py-16 sm:py-20 text-center">
        <div class="container mx-auto px-4 max-w-screen-sm">
          <div class="sm:[width:480px] md:[width:540px] lg:[width:600px]" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <img src="/img/birthdate.svg" style="margin: 10px;">
            <h2 class="text-xl sm:text-2xl font-bold leading-snug flex gap-2 justify-center" style="font-weight:800;">
              What's your birthdate?
            </h2>
            <p style="font-size: 18px;">We use your birthdate to create an age-appropriate experience for children.</p>
            <input 
              type="date" 
              id="birthdate" 
              name="birthdate" 
              placeholder="dd/mm/yyyy"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; padding: 14px 19px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #262626; color: white; font-size: 16px; outline: none;"        >
          </div>
      </section>
    </div>
    
    <!-- Step 4: Email -->
    <div id="step4" class="step">
      <section class="hero py-16 sm:py-20 text-center">
        <div class="container mx-auto px-4 max-w-screen-sm">
          <div class="sm:[width:480px] md:[width:540px] lg:[width:600px]" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <img src="/img/email.svg" style="margin: 10px;">
            <h2 class="text-xl sm:text-2xl font-bold leading-snug flex gap-2 justify-center" style="font-weight:800;">
              What's your email address?
            </h2>
            <p style="font-size: 18px;">Your email can be used to recover your account if you forget your password and for 2-factor authentication.</p>
            <input 
              type="email" 
              id="email" 
              name="email" 
              placeholder="example@example.com"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; padding: 14px 19px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #262626; color: white; font-size: 16px; outline: none;"        >
          </div>
      </section>
    </div>
    
    <!-- Step 5: Final -->
    <div id="step5" class="step">
      <section class="hero py-16 sm:py-20 text-center">
        <div class="container mx-auto px-4 max-w-screen-sm">
          <div class="sm:[width:480px] md:[width:540px] lg:[width:600px]" style="display: flex; flex-direction: column; align-items: center; gap: 16px;">
            <img src="/img/exit-onboarding.svg" style="margin: 10px;">
            <h2 class="text-xl sm:text-2xl font-bold leading-snug flex gap-2 justify-center" style="font-weight:800;">
              <span>Welcome, </span>
              <span class="username"></span>
              <span>!</span>
            </h2>
            <p style="font-size: 18px;">Now you can explore Hexium Canvas! Make sure to verify your email address to access more features.</p>
          
            <button 
              id="download"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; padding: 14px 19px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #262626; color: white; font-size: 16px; outline: none;"        >
              Download Hexium Designer
            </button>
            <button 
              id="continue5"
              class="[width:75%] md:[width:350px]"
              style="height: 38px; border-radius: 25px; border-top: 1px solid rgba(255, 255, 255, 0.10); background: #34C286; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;"        >
              Continue
            </button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <script>
    // Validate username format (simple alphanumeric, 3-20 chars)
    function validateUsername(name) {
      return /^[a-zA-Z0-9_-]{3,20}$/.test(name);
    }
    // Validate email using simple regex
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    // Basic password validation: min 8 chars
    function validatePassword(pwd) {
      return pwd.length >= 8;
    }

    // Steps
    const steps = ["step1", "step2", "step3", "step4", "step5"];
    let currentStepIndex = 0;
    const userData = { school: null };

    function showStep(index) {
      steps.forEach((id, i) => {
        document.getElementById(id).classList.toggle("current", i === index);
      });
      currentStepIndex = index;
      if (index === steps.length - 1) {
        document.querySelector("#step5 .username").textContent = userData.username || "";
      }
    }

    document.getElementById("continue1").addEventListener("click", () => {
      const username = document.getElementById("username").value.trim();
      if (!validateUsername(username)) {
        alert("Please enter a valid username (3-20 letters, numbers, _ or -).");
        return;
      }
      // Simulate username availability check (always available here)
      userData.username = username;
      showStep(1);
    });

    document.getElementById("continue2").addEventListener("click", () => {
      const password = document.getElementById("password").value;
      if (!validatePassword(password)) {
        alert("Password must be at least 8 characters long.");
        return;
      }
      userData.password = password;
      showStep(2);
    });

    document.getElementById("continue3").addEventListener("click", () => {
      const birthdate = document.getElementById("birthdate").value || null;
      userData.birthdate = birthdate;
      showStep(3);
    });

    document.getElementById("continue4").addEventListener("click", () => {
      const email = document.getElementById("email").value.trim();
      if (!validateEmail(email)) {
        alert("Please enter a valid email address.");
        return;
      }
      userData.email = email;
      showStep(4);
    });

    document.getElementById("continue5").addEventListener("click", () => {
      // Send GET request to /api/accounts/new
      const username = encodeURIComponent(userData.username);
      const password = encodeURIComponent(userData.password);
      const school = userData.school ? encodeURIComponent(userData.school) : "null";
      const birthday = userData.birthdate ? encodeURIComponent(userData.birthdate) : "null";

      fetch(`/api/accounts/new?username=${username}&password=${password}&school=${school}&birthday=${birthday}`, {
        method: "GET"
      }).finally(() => {
        window.location.href = "https://hexiumapps.com";
      });
    });

    document.getElementById("download").addEventListener("click", () => {
      window.location.href = "/pricing";
    });
  </script>
</body>
</html>
